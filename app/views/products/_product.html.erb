<div class="col-md-3 col-sm-4 col-xs-6 margin-top-5-bot-5 padding_0">
  <div class="item-product-shop">
    <div class="product_content_area">
      <div class="image_product" data-product-id="<%= product.id %>">
        <% if @domain.present? %>
          <% if current_user.is_member_of_domain? @domain %>
            <%= link_to domain_product_path(@domain, product) do %>
              <%= image_tag product.image.url,
                class: "image-shop height-27375 img_cover_size" %>
            <% end %>
          <% else %>
            <%= link_to "#join-domain-order-#{product.id}", "data-toggle": "modal" do %>
              <%= image_tag product.image.url,
                class: "image-shop height-27375 img_cover_size" %>
            <% end %>
          <% end %>
        <% else %>
          <%= link_to product_path(product, domain_id: "not_find") do %>
            <%= image_tag product.image.url,
              class: "image-shop height-27375 img_cover_size" %>
          <% end %>
        <% end %>
        <h3>
          <%= t "cart.order_time_text" %>
          <%= l product.start_hour, format: :short_time %>
          <%= t "split" %>
          <%= l product.end_hour, format: :short_time %>
        </h3>
      </div>
    </div>
    <% if @domain.present? %>
      <div class="col-xs-12 padding_0 margin-top-5-bot-5">
        <div class="col-xs-12 product_text truncate padding-left-0 center
          name_product_in_shop center-sm padding-right-0" title="<%= product.name %>">
          <strong><%= product.name %></strong>
        </div>
        <div class="col-xs-12 padding_0 product_text truncate center">
          <h4 class="margin-bottom-10"><%= format_price product.price %></h4>
        </div>
      </div>
    <% end %>
    <% if current_user.is_member_of_domain? @domain %>
      <div class="interaction_area col-xs-12 center padding_0">
        <% if Time.now.is_between_short_time?(product.start_hour,
          product.end_hour) || !product.shop.active? ||
          product.shop.status_on_off == Settings.shop_status_off %>
          <%= link_to t("blank_link"), class: "btn btn_add_to_cart btn-add
            padding-left-for-button disabled btn_center" do %>
            <span class="glyphicon glyphicon-shopping-cart"></span>
            <%= t "cart.add_to_card" %>
          <% end %>
          <%= link_to t("blank_link"), class: "btn btn_add_to_cart btn-add
            padding-left-for-button disabled btn_center" do %>
            <span class="glyphicon glyphicon glyphicon-check"></span>
            <%= t "cart_quick.order_now" %>
          <% end %>
        <% else %>
          <%= link_to cart_path(product.id), remote: true,
            method: :put, class: "btn btn_add_to_cart btn-add
            padding-left-for-button btn_center" do %>
            <span class="glyphicon glyphicon-shopping-cart"></span>
            <%= t "cart.add_to_card" %>
          <% end %>
          <%= link_to "#modal_order_now", data: {toggle: "modal", product: product},
            class: "btn btn_add_to_cart btn-add padding-left-for-button
            btn_modal_order_now btn_center" do %>
            <span class="glyphicon glyphicon glyphicon-check"></span>
            <%= t "cart_quick.order_now" %>
          <% end %>
        <% end %>
      </div>
    <% else %>
      <div class="interaction_area col-xs-12 center">
        <%= link_to "#join-domain-order-#{product.id}", "data-toggle": "modal",
          class: "btn btn_add_to_cart btn-add" do %>
          <span class="glyphicon glyphicon-shopping-cart"></span>
          <%= t "cart.add_to_card" %>
        <% end %>
      </div>
    <% end %>
  </div>
  <div id="join-domain-order-<%= product.id %>" class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header modal_header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            &times;
          </button>
          <h4 class="modal-title modal_text_header"><%= t "common.notifications" %></h4>
        </div>
        <div class="modal-body confirm-body">
          <h4><%= t "user_need_join_domain_product",
            domain_name: @domain.name, product_name: product.name %>
          </h4>
          <h4><%= t "click_to_join_domain" %></h4>
        </div>
        <div class="modal-footer">
          <%= link_to t("common.btn_ok"), user_domains_path(user_id: current_user.id,
            domain_id: @domain.id, join_domain: true), method: :post,
            class: "btn btn-success" %>
          <%= link_to t("cancel"), "#", "data-dismiss": "modal",
            class: "btn btn-default" %>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="item-<%= product.id %> item-hidden">
  <div class="item-img item-product-shop">
    <%= image_tag product.image.url, class: "img_cover_size" %>
  </div>
  <div class="item-info item-product-shop">
    <table class="table table-borderless">
      <tbody>
        <tr>
          <th><%= t("food_name") + ":" %></th>
          <td><%= product.name %></td>
        </tr>
        <tr>
          <th><%= t "shop_name" %></th>
          <td><%= product.shop_name %></td>
        </tr>
        <tr>
          <th><%= t("cart_quick.modal.price") + ":" %></th>
          <td><%= format_price product.price %></td>
        </tr>
        <tr>
          <th><%= t("admin.categories.index.heading") + ":" %></th>
          <td><%= product.category_name %></td>
        </tr>
        <tr>
          <th><%= t("opening_hours") + ":" %></th>
          <td>
            <%= l product.start_hour, format: :short_time %>
            <%= t "split" %>
            <%= l product.end_hour, format: :short_time %>
          </td>
        </tr>
        <tr>
          <th><%= t("description") + ":" %></th>
          <td><%= product.description %></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
